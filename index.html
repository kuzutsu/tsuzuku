<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Tsuzuku</title>
        <meta charset="utf-8">
        <meta name="description" content="Search anime metadata, even when offline!">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#fff">
        <link rel="icon" href="logo-192.png">
        <link rel="apple-touch-icon" href="logo-maskable-192.png">
        <link rel="manifest" href="manifest.webmanifest">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link rel="preconnect" href="https://cdn.jsdelivr.net">
        <link rel="preconnect" href="https://raw.githubusercontent.com">
        <link rel="preconnect" href="https://myanimelist.net">
        <link rel="preconnect" href="https://kitsu.io">
        <link rel="dns-prefetch" href="https://fonts.gstatic.com">
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
        <link rel="dns-prefetch" href="https://raw.githubusercontent.com">
        <link rel="dns-prefetch" href="https://myanimelist.net">
        <link rel="dns-prefetch" href="https://kitsu.io">
        <link rel="preload" href="https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2" as="font" crossorigin>
        <link rel="preload" href="https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2" as="font" crossorigin>
        <link href="index.css" rel="stylesheet">
    </head>
    <body class="light">
        <noscript>
            <span id="full">Tsuzuku can't run without JavaScript</span>
        </noscript>
        <script>
            switch (localStorage.getItem('theme')) {
                case 'dark':
                    document.body.classList.remove('light');
                    document.body.classList.add('dark');
                    document.head.querySelector('[name="theme-color"]').content = '#000';
                    break;

                case 'light':
                    break;

                default:
                    localStorage.setItem('theme', 'light');
                    break;
            }

            if ('serviceWorker' in navigator) {
                navigator
                    .serviceWorker
                    .register('sw.js')
                    .then((registration) => {
                        registration.addEventListener('updatefound', () => {
                            let r = registration.installing;
                            
                            r.addEventListener('statechange', () => {
                                if (r.state === 'installed') {
                                    r.postMessage({
                                        update: true
                                    });
                                }
                            });
                        });
                    });
            }
        </script> 
        <header>
            <div id="close" style="display: inline-flex; align-items: center; display: none;">
                <svg viewBox="0 0 24 24" width="19" height="19">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
                </svg>
            </div>
            <span id="header-title">Tsuzuku</span>
            <span class="flex-separator"></span>
            <a href="https://kuzutsu.github.io/tsuzuku-games/" target="_blank" rel="noreferrer" style="display: flex; align-items: center;">Games</a>
            <span class="separator"></span>
            <a href="https://github.com/kuzutsu/tsuzuku" target="_blank" rel="noreferrer" style="display: flex; align-items: center;">GitHub</a>
            <span class="separator"></span>
            <div id="theme" title="Toggle theme" style="display: inline-flex; align-items: center;">
                <svg viewBox="0 0 24 24" width="19" height="19">
                    <path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6z"></path>
                </svg>
            </div>
        </header>
        <main>
            <span id="loading">Fetching database...</span>
            <div id="search-container" style="flex-direction: column;">
                <div class="search2-container" style="height: 48px; width: 100%; display: inline-flex; align-items: center;">
                    <span id="enter" title="Search" style="display: inline-flex; align-items: center;">
                        <svg viewBox="0 0 24 24" width="19" height="19">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                        </svg>
                    </span>
                    <span class="separator"></span>
                    <div id="default" style="display: inline-flex; align-items: center; width: 100%;">
                        <input id="search" type="text" autocomplete="off" placeholder="Search" title="Enter query">
                        <span id="clear" title="Clear" style="display: none; align-items: center; visibility: visible;">
                            <span class="separator"></span>
                            <svg viewBox="0 0 24 24" width="19" height="19">
                                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
                            </svg>
                        </span>
                        <span class="separator"></span>
                        <span id="enter2" title="Enter" style="display: inline-flex; align-items: center; visibility: visible;">
                            <svg viewBox="0 0 24 24" width="19" height="19">
                                <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path>
                            </svg>
                        </span>
                        <span class="separator"></span>
                        <span id="settings" title="Settings" style="display: inline-flex; align-items: center;">
                            <svg viewBox="0 0 24 24" width="19" height="19" style="fill: #aaa;">
                                <path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"></path>
                            </svg>
                        </span>
                    </div>
                    <div class="tabs" style="display: none; font-size: 14px; align-items: center; width: 100%;">
                        <div class="tab" data-query="status:completed|dropped|paused|planning|rewatching|watching" style="height: 100%; display: inline-flex; align-items: center; justify-content: center; color: #aaa;">All</div>
                        <span class="separator"></span>
                        <div class="tab" data-query="status:completed" style="height: 100%; display: inline-flex; align-items: center; justify-content: center; color: #aaa;">Completed</div>
                        <span class="separator"></span>
                        <div class="tab" data-query="status:dropped" style="height: 100%; display: inline-flex; align-items: center; justify-content: center; color: #aaa;">Dropped</div>
                        <span class="separator"></span>
                        <div class="tab" data-query="status:paused" style="height: 100%; display: inline-flex; align-items: center; justify-content: center; color: #aaa;">Paused</div>
                        <span class="separator"></span>
                        <div class="tab" data-query="status:planning" style="height: 100%; display: inline-flex; align-items: center; justify-content: center; color: #aaa;">Planning</div>
                        <span class="separator"></span>
                        <div class="tab" data-query="status:rewatching" style="height: 100%; display: inline-flex; align-items: center; justify-content: center; color: #aaa;">Rewatching</div>
                        <span class="separator"></span>
                        <div class="tab" data-query="status:watching" style="height: 100%; display: inline-flex; align-items: center; justify-content: center; color: #aaa;">Watching</div>
                    </div>
                </div>
                <div class="settings-container" style="width: 100%; display: none; flex-direction: column; align-items: center;">
                    <div style="display: inline-flex; white-space: nowrap; width: 100%; height: 40px; align-items: center; user-select: none; font-size: 14px;">
                        <label for="regex">Use regular expression</label>
                        <span class="flex-separator"></span>
                        <input id="regex" type="checkbox">
                    </div>
                    <div style="display: inline-flex; white-space: nowrap; width: 100%; height: 40px; align-items: center; user-select: none; font-size: 14px;">
                        <label for="alt">Include alternative titles</label>
                        <span class="flex-separator"></span>
                        <input id="alt" type="checkbox" checked>
                    </div>
                    <div style="display: inline-flex; white-space: nowrap; width: 100%; height: 40px; align-items: center; user-select: none; font-size: 14px;">
                        <label for="random">Randomize</label>
                        <span class="flex-separator"></span>
                        <input id="random" type="checkbox">
                    </div>
                    <div style="display: inline-flex; white-space: nowrap; width: 100%; height: 40px; align-items: center; user-select: none; font-size: 14px;">
                        <span class="separator"></span>
                        <label for="number" style="color: #aaa;">Number of selections</label>
                        <span class="flex-separator"></span>
                        <input id="number" type="number" min="1" value="1" style="width: 50px; border: 0;" disabled>
                    </div>
                </div>
            </div>
            <div id="database-container"></div>
        </main>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/tabulator_core.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/filter.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/frozen_columns.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/format.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/resize_table.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/select_row.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/sort.min.js"></script>
        <script defer type="module" src="index.js"></script>
    </body>
</html>