<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Tsuzuku</title>
        <meta charset="utf-8">
        <meta name="description" content="Search anime using regular expressions, even offline ＼(￣▽￣)／">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#fff">
        <link rel="icon" href="logo-192.png">
        <link rel="apple-touch-icon" href="logo-maskable-192.png">
        <link rel="manifest" href="manifest.webmanifest">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link rel="preconnect" href="https://cdn.jsdelivr.net">
        <link rel="preconnect" href="https://raw.githubusercontent.com">
        <link rel="dns-prefetch" href="https://fonts.gstatic.com">
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
        <link rel="dns-prefetch" href="https://raw.githubusercontent.com">
        <link rel="dns-prefetch" href="https://myanimelist.net">
        <link rel="dns-prefetch" href="https://kitsu.io">
        <link rel="preload" href="fetchFunction.js" as="script" crossorigin>
        <link rel="preload" href="https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2" as="font" crossorigin>
        <link rel="preload" href="https://fonts.gstatic.com/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2" as="font" crossorigin>
        <link rel="preload" href="index.css" as="style">
        <link href="index.css" rel="stylesheet">
    </head>
    <body class="light">
        <noscript>
            <span id="noscript">Tsuzuku can't run without JavaScript</span>
        </noscript>
        <script>
            switch (localStorage.getItem('theme')) {
                case 'dark':
                    document.body.classList.remove('light');
                    document.body.classList.add('dark');
                    document.head.querySelector('[name="theme-color"]').content = '#000';
                    break;

                case 'light':
                    break;

                default:
                    localStorage.setItem('theme', 'light');
                    break;
            }

            if ('serviceWorker' in navigator) {
                navigator
                    .serviceWorker
                    .register('sw.js')
                    .then((registration) => {
                        registration.addEventListener('updatefound', () => {
                            let r = registration.installing;
                            
                            r.addEventListener('statechange', () => {
                                if (r.state === 'installed') {
                                    r.postMessage({
                                        update: true
                                    });
                                }
                            });
                        });
                    });
            }

            addEventListener('online', () => {
                document.querySelector('#network').setAttribute('title', 'Online');
                document.querySelector('#network svg').innerHTML = '<path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z"></path>';
            });

            addEventListener('offline', () => {
                document.querySelector('#network').setAttribute('title', 'Offline');
                document.querySelector('#network svg').innerHTML = '<path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"></path>';
            });
        </script> 
        <header>
            <div id="network" title="Online" style="height: 100%; padding: 0 19px 0 19px; display: inline-flex; align-items: center;">
                <svg viewBox="0 0 24 24" width="19" height="19">
                    <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z"></path>
                </svg>
            </div>
            <div id="close" style="height: 100%; padding: 0 19px 0 19px; display: inline-flex; align-items: center; cursor: pointer; display: none;">
                <svg viewBox="0 0 24 24" width="19" height="19">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
                </svg>
            </div>
            <span id="header-title">Tsuzuku</span>
            <span id="header-version">-α</span>
            <span style="width: 100%;"></span>
            <a href="https://github.com/kuzutsu/tsuzuku" title="View source on GitHub" target="_blank" rel="noreferrer" style="display: flex; align-items: center;">
                <svg viewBox="-1 -1 18 18" height="19" width="19">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
            <div id="theme" title="Toggle theme" style="height: 100%; padding: 0 19px 0 19px; display: inline-flex; align-items: center; cursor: pointer;">
                <svg viewBox="0 0 24 24" width="19" height="19">
                    <path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6z"></path>
                </svg>
            </div>
        </header>
        <main>
            <span id="loading">Loading database...</span>
            <div id="search-container">
                <span id="enter" title="Search" style="padding: 4px; cursor: default; display: inline-flex; align-items: center;">
                    <svg viewBox="0 0 24 24" width="19" height="19">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                    </svg>
                </span>
                <input id="search" type="text" autocomplete="off" placeholder="Search">
                <span id="clear" title="Clear" style="padding: 4px; display: none; align-items: center; visibility: visible;">
                    <svg class="disabled" viewBox="0 0 24 24" width="19" height="19">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
                    </svg>
                </span>
                <span id="regex" title="Use regular expression" style="display: inline-flex; align-items: center; padding: 4px;">
                    <svg class="disabled" viewBox="2 2 22 22" width="17" height="17">
                        <path d="M16,16.92C15.67,16.97 15.34,17 15,17C14.66,17 14.33,16.97 14,16.92V13.41L11.5,15.89C11,15.5 10.5,15 10.11,14.5L12.59,12H9.08C9.03,11.67 9,11.34 9,11C9,10.66 9.03,10.33 9.08,10H12.59L10.11,7.5C10.3,7.25 10.5,7 10.76,6.76V6.76C11,6.5 11.25,6.3 11.5,6.11L14,8.59V5.08C14.33,5.03 14.66,5 15,5C15.34,5 15.67,5.03 16,5.08V8.59L18.5,6.11C19,6.5 19.5,7 19.89,7.5L17.41,10H20.92C20.97,10.33 21,10.66 21,11C21,11.34 20.97,11.67 20.92,12H17.41L19.89,14.5C19.7,14.75 19.5,15 19.24,15.24V15.24C19,15.5 18.75,15.7 18.5,15.89L16,13.41V16.92H16V16.92M5,19A2,2 0 0,1 7,17A2,2 0 0,1 9,19A2,2 0 0,1 7,21A2,2 0 0,1 5,19H5Z"></path>
                    </svg>
                </span>
                <span id="random" title="Randomize" class="material-icons" style="padding: 4px; display: inline-flex; align-items: center;">
                    <svg class="disabled" viewBox="0 0 24 24" width="19" height="19">
                        <path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"></path>
                    </svg>
                </span>
                <input id="number" type="number" min="1" value="1" autocomplete="off" style="width: 50px; height: 100%; border: 0; outline: none; padding: 4px; font-size: 14px;" disabled>
            </div>
            <div id="database-container"></div>
        </main>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/tabulator_core.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/edit.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/filter.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/format.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/resize_table.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/select_row.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/tabulator-tables/dist/js/modules/sort.min.js"></script>
        <script defer type="module" src="index.js"></script>
    </body>
</html>