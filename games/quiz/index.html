<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Quiz</title>
        <meta charset="utf-8">
        <meta name="description" content="a certain anime index + tracker + games">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="theme-color" content="#000">
        <meta name="color-scheme" content="dark">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-title" content="Tsuzuku">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
        <link rel="icon" href="../../images/logo-192.png">
        <link rel="mask-icon" href="../../images/logo.svg" color="#000">
        <link rel="apple-touch-icon" href="../../images/logo-180.png">
        <link rel="manifest" href="../../manifest.webmanifest">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link rel="preconnect" href="https://raw.githubusercontent.com">
        <link rel="dns-prefetch" href="https://fonts.gstatic.com">
        <link rel="dns-prefetch" href="https://raw.githubusercontent.com">
        <link href="../../global.css" rel="stylesheet">
        <link href="./index.css" rel="stylesheet">
    </head>
    <body>
        <noscript>Tsuzuku can't run without JavaScript</noscript>
        <header>
            <a href="../" title="Games" style="display: inline-flex; align-items: center; margin-right: 19px;">
                <svg viewBox="0 0 24 24" width="17" height="17">
                    <path d="M12 20 4 12 12 4 13.425 5.4 7.825 11H20V13H7.825L13.425 18.6Z"></path>
                </svg>
            </a>
            <span class="bold">Quiz</span>
            <span class="flex-separator"></span>
            <a href="https://github.com/kuzutsu/tsuzuku" rel="noreferrer" target="_blank" style="display: inline-flex; align-items: center; text-decoration: none;">
                <span>GitHub&nbsp;</span>
                <svg viewBox="0 0 24 24" height="17" width="17">
                    <path d="M21 12V19Q21 19.825 20.413 20.413Q19.825 21 19 21H5Q4.175 21 3.587 20.413Q3 19.825 3 19V5Q3 4.175 3.587 3.587Q4.175 3 5 3H12V5H5Q5 5 5 5Q5 5 5 5V19Q5 19 5 19Q5 19 5 19H19Q19 19 19 19Q19 19 19 19V12ZM9.7 15.7 8.3 14.3 17.6 5H14V3H21V10H19V6.4Z"></path>
                </svg>
            </a>
        </header>
        <main>
            <div class="menu">
                <span style="margin-right: 9.5px;">High</span>
                <span class="high bold" style="margin-right: 19px;"></span>
                <span style="margin-right: 9.5px;">Score</span>
                <span class="score bold"></span>
                <span class="plus bold" style="margin-left: 9.5px;"></span>
                <span class="minus bold" style="margin-left: 9.5px;"></span>
                <span class="min bold" style="margin-left: 9.5px;"></span>
                <span style="width: 100%; min-width: 19px;"></span>
                <span class="settings" title="Settings" tabindex="0" style="display: inline-flex; align-items: center;">
                    <svg viewBox="0 0 24 24" width="17" height="17">
                        <path d="M9.25 22 8.85 18.8Q8.525 18.675 8.238 18.5Q7.95 18.325 7.675 18.125L4.7 19.375L1.95 14.625L4.525 12.675Q4.5 12.5 4.5 12.337Q4.5 12.175 4.5 12Q4.5 11.825 4.5 11.662Q4.5 11.5 4.525 11.325L1.95 9.375L4.7 4.625L7.675 5.875Q7.95 5.675 8.25 5.5Q8.55 5.325 8.85 5.2L9.25 2H14.75L15.15 5.2Q15.475 5.325 15.763 5.5Q16.05 5.675 16.325 5.875L19.3 4.625L22.05 9.375L19.475 11.325Q19.5 11.5 19.5 11.662Q19.5 11.825 19.5 12Q19.5 12.175 19.5 12.337Q19.5 12.5 19.45 12.675L22.025 14.625L19.275 19.375L16.325 18.125Q16.05 18.325 15.75 18.5Q15.45 18.675 15.15 18.8L14.75 22ZM12.05 15.5Q13.5 15.5 14.525 14.475Q15.55 13.45 15.55 12Q15.55 10.55 14.525 9.525Q13.5 8.5 12.05 8.5Q10.575 8.5 9.562 9.525Q8.55 10.55 8.55 12Q8.55 13.45 9.562 14.475Q10.575 15.5 12.05 15.5ZM12.05 13.5Q11.425 13.5 10.988 13.062Q10.55 12.625 10.55 12Q10.55 11.375 10.988 10.938Q11.425 10.5 12.05 10.5Q12.675 10.5 13.113 10.938Q13.55 11.375 13.55 12Q13.55 12.625 13.113 13.062Q12.675 13.5 12.05 13.5ZM12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12Q12 12 12 12ZM11 20H12.975L13.325 17.35Q14.1 17.15 14.763 16.762Q15.425 16.375 15.975 15.825L18.45 16.85L19.425 15.15L17.275 13.525Q17.4 13.175 17.45 12.787Q17.5 12.4 17.5 12Q17.5 11.6 17.45 11.212Q17.4 10.825 17.275 10.475L19.425 8.85L18.45 7.15L15.975 8.2Q15.425 7.625 14.763 7.237Q14.1 6.85 13.325 6.65L13 4H11.025L10.675 6.65Q9.9 6.85 9.238 7.237Q8.575 7.625 8.025 8.175L5.55 7.15L4.575 8.85L6.725 10.45Q6.6 10.825 6.55 11.2Q6.5 11.575 6.5 12Q6.5 12.4 6.55 12.775Q6.6 13.15 6.725 13.525L4.575 15.15L5.55 16.85L8.025 15.8Q8.575 16.375 9.238 16.762Q9.9 17.15 10.675 17.35Z"></path>
                    </svg>
                </span>
            </div>
            <div class="settings-container" style="display: none; flex-direction: column;">
                <div class="label">
                    <span style="color: var(--disabled);">â€» Changing any setting will reset both scores</span>
                </div>
                <div style="display: flex;">
                    <div style="display: flex; flex-direction: column;">
                        <div class="label">
                            <label for="type">Category</label>
                        </div>
                        <div class="label">
                            <label for="operators">Enable operators (<span class="mono">&lt;</span>, <span class="mono">&gt;</span>, <span class="mono">&lt;=</span>, <span class="mono">&gt;=</span>)</label>
                        </div>
                        <div class="label">
                            <label for="choices">Number of choices</label>
                        </div>
                        <div class="label">
                            <label for="selection">Number of correct answers</label>
                        </div>
                        <div class="label">
                            <label for="auto-submit">Automatic submit</label>
                        </div>
                        <div class="label">
                            <label for="skip">Enable skipping</label>
                        </div>
                        <div class="label">
                            <label for="reset-incorrect">Reset score when incorrect</label>
                        </div>
                        <div class="label">
                            <label for="negative">Enable negative score</label>
                        </div>
                        <div class="label"></div>
                        <div class="label">
                            <div class="reset-high bold">Reset high</div>
                        </div>
                        <div class="label">
                            <div class="reset-score bold">Reset score</div>
                        </div>
                    </div>
                    <div style="width: 100%; min-width: 19px;"></div>
                    <div style="display: flex; flex-direction: column;">
                        <div class="input">
                            <select id="type">
                                <option>tag</option>
                                <option>year</option>
                                <option>episodes</option>
                                <option>season</option>
                                <option>random</option>
                            </select>
                        </div>
                        <div class="input">
                            <input id="operators" type="checkbox"></input>
                        </div>
                        <div class="input">
                            <select id="choices">
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                                <option>random</option>
                            </select>
                        </div>
                        <div class="input">
                            <select id="selection">
                                <option>1</option>
                                <option>0 or more</option>
                            </select>
                        </div>
                        <div class="input">
                            <input id="auto-submit" type="checkbox"></input>
                        </div>
                        <div class="input">
                            <input id="skip" type="checkbox"></input>
                        </div>
                        <div class="input">
                            <input id="reset-incorrect" type="checkbox"></input>
                        </div>
                        <div class="input">
                            <input id="negative" type="checkbox"></input>
                        </div>
                        <div class="input"></div>
                        <div class="input"></div>
                        <div class="input"></div>
                    </div>
                </div>
            </div>
            <div class="query">
                <div class="query-container">
                    <a href rel="noreferrer"></a>
                </div>
                <span class="reload bold" tabindex="0" style="margin-left: 19px;">Skip</span>
                <span class="submit bold" tabindex="0" style="margin-left: 19px;"></span>
            </div>
            <div class="choice"></div>
        </main>
        <footer>
            <div class="loading">Fetching database<span class="el">.</span><span class="lip">.</span><span class="sis">.</span></div>
        </footer>
        <script type="module" src="../../global.js"></script>
        <script>
            const
                settings = {
                    autoSubmit: false,
                    cheat: {},
                    choices: 4,
                    high: 0,
                    negative: true,
                    operators: false,
                    resetIncorrect: false,
                    score: 0,
                    selection: '1',
                    skip: true,
                    type: 'tag'
                },
                settings2 = {};

            let value = null;

            try {
                const map = new Map(Object.entries(JSON.parse(localStorage.getItem('quiz'))));

                for (const [key, value] of Object.entries(settings)) {
                    if (map.has(key)) {
                        settings2[key] = map.get(key);
                    } else {
                        settings2[key] = value;
                    }
                }

                localStorage.setItem('quiz', JSON.stringify(settings2));
            } catch (e) {
                localStorage.setItem('quiz', JSON.stringify(settings));
            }

            value = JSON.parse(localStorage.getItem('quiz'));

            document.querySelector('#choices').value = value.choices;
            document.querySelector('#selection').value = value.selection;
            document.querySelector('#type').value = value.type;

            document.querySelector('#operators').checked = value.operators;
            document.querySelector('#auto-submit').checked = value.autoSubmit;
            document.querySelector('#skip').checked = value.skip;
            document.querySelector('#negative').checked = value.negative;
            document.querySelector('#reset-incorrect').checked = value.resetIncorrect;

            if (['episodes', 'year'].indexOf(value.type) > -1) {
                document.querySelector('[for="operators"]').style.color = '';
                document.querySelector('[for="operators"]').parentElement.style.display = '';
                document.querySelector('#operators').removeAttribute('disabled');
                document.querySelector('#operators').parentElement.style.display = '';
            } else {
                document.querySelector('[for="operators"]').style.color = 'var(--disabled)';
                document.querySelector('[for="operators"]').parentElement.style.display = 'none';
                document.querySelector('#operators').setAttribute('disabled', '');
                document.querySelector('#operators').parentElement.style.display = 'none';
            }

            if (value.selection === '0 or more') {
                document.querySelector('[for="auto-submit"]').style.color = 'var(--disabled)';
                document.querySelector('[for="auto-submit"]').parentElement.style.display = 'none';
                document.querySelector('#auto-submit').setAttribute('disabled', '');
                document.querySelector('#auto-submit').parentElement.style.display = 'none';
            } else {
                document.querySelector('[for="auto-submit"]').style.color = '';
                document.querySelector('[for="auto-submit"]').parentElement.style.display = '';
                document.querySelector('#auto-submit').removeAttribute('disabled');
                document.querySelector('#auto-submit').parentElement.style.display = '';
            }

            if (value.resetIncorrect) {
                document.querySelector('[for="negative"]').style.color = 'var(--disabled)';
                document.querySelector('[for="negative"]').parentElement.style.display = 'none';
                document.querySelector('#negative').setAttribute('disabled', '');
                document.querySelector('#negative').parentElement.style.display = 'none';
            } else {
                document.querySelector('[for="negative"]').style.color = '';
                document.querySelector('[for="negative"]').parentElement.style.display = '';
                document.querySelector('#negative').removeAttribute('disabled');
                document.querySelector('#negative').parentElement.style.display = '';
            }
        </script>
        <script defer type="module" src="./index.js"></script>
    </body>
</html>